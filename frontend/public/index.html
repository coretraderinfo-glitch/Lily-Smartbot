<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lily OS - Global Fleet Commander</title>
    <link rel="stylesheet" href="css/dashboard_luxury.css">
</head>

<body>
    <!-- MASTER LOADER -->
    <div id="masterLoader" class="master-loader">
        <div class="loader-spinner"></div>
        <p style="margin-top: 20px; font-weight: 700; letter-spacing: 2px; color: var(--text-muted);">INITIALIZING
            MASTER CORE</p>
    </div>

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="brand">
            <div class="brand-icon">L</div>
            <div class="brand-text">LILY OS</div>
        </div>
        <nav class="nav">
            <a onclick="switchTab('overview')" class="nav-link active" id="nav-overview">
                <i>üìä</i> <span>Overview</span>
            </a>
            <a onclick="switchTab('fleet')" class="nav-link" id="nav-fleet">
                <i>üöÄ</i> <span>Fleet Control</span>
            </a>
            <a onclick="switchTab('ai')" class="nav-link" id="nav-ai">
                <i>üß†</i> <span>AI Core</span>
            </a>
            <a onclick="switchTab('settings')" class="nav-link" id="nav-settings">
                <i>‚öôÔ∏è</i> <span>Master Settings</span>
            </a>
        </nav>

        <div style="margin-top: auto; padding: 24px;">
            <div class="btn btn-outline" style="width: 100%; justify-content: center;"
                onclick="window.location.reload()">
                <i>üîÑ</i> <span>Reload Clusters</span>
            </div>
        </div>
    </aside>

    <!-- MAIN CONTAINER -->
    <main class="container">
        <header>
            <div class="header-meta">
                <h1 id="tabTitle">Overview</h1>
                <p id="tabSubtitle">Real-time Group Intelligence and Master Control.</p>
            </div>
            <div class="header-actions" style="display: flex; gap: 12px;">
                <button class="btn btn-outline"><i>üìÖ</i> Feb 2026</button>
                <button class="btn btn-primary" onclick="addNode()">+ New Client Server</button>
            </div>
        </header>

        <!-- GLOBAL STATS OVERVIEW -->
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-label">Total Volume (Global)</span>
                <span class="stat-value">CNY 14.8M</span>
                <div class="stat-trend trend-up"><i>‚Üë</i> 12.4% vs last mo</div>
                <div class="chart-mock"></div>
            </div>
            <div class="stat-card">
                <span class="stat-label">Active Fleet Nodes</span>
                <span class="stat-value" id="stat-nodes">12</span>
                <div class="stat-trend trend-up"><i>‚Üë</i> 2 new nodes</div>
                <div class="chart-mock" style="border-color: var(--accent);"></div>
            </div>
            <div class="stat-card">
                <span class="stat-label">Global User Reach</span>
                <span class="stat-value">842K</span>
                <div class="stat-trend trend-up"><i>‚Üë</i> 5.2%</div>
                <div class="chart-mock" style="border-color: var(--success);"></div>
            </div>
            <div class="stat-card">
                <span class="stat-label">Master Core Load</span>
                <span class="stat-value">14.2%</span>
                <div class="stat-trend"><i>~</i> Optimal Sync</div>
                <div class="chart-mock" style="border-color: var(--warning);"></div>
            </div>
        </div>

        <div class="grid-layout">
            <!-- FLEET PANEL -->
            <section class="panel">
                <div class="panel-header">
                    <h2 id="panelTitle">Active Groups</h2>
                    <span id="panelSubtitle" style="font-size: 13px; color: var(--text-muted);">Syncing Global
                        Data...</span>
                </div>

                <div class="node-list" id="nodeList">
                    <!-- Local Node will be populated with infra data -->
                </div>

                <!-- Live Infrastructure Metadata -->
                <div
                    style="margin-top: 32px; padding-top: 24px; border-top: 1px solid var(--border); display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h4
                            style="font-size: 11px; text-transform: uppercase; color: var(--text-muted); margin-bottom: 8px;">
                            Railway Infrastructure</h4>
                        <div id="infra-railway" style="font-size: 13px; font-weight: 700; color: var(--accent);">
                            SYNCING...</div>
                        <div id="infra-url" style="font-size: 12px; color: var(--text-dim); font-family: monospace;">---
                        </div>
                    </div>
                    <div>
                        <h4
                            style="font-size: 11px; text-transform: uppercase; color: var(--text-muted); margin-bottom: 8px;">
                            GitHub Repository</h4>
                        <div id="infra-github" style="font-size: 13px; font-weight: 700; color: var(--primary);">
                            SYNCING...</div>
                        <div id="infra-branch" style="font-size: 12px; color: var(--text-dim); font-family: monospace;">
                            ---</div>
                    </div>
                </div>
            </section>

            <!-- AI CONTROL SIDEBAR -->
            <aside class="panel" style="display: flex; flex-direction: column; gap: 20px;">
                <div class="panel-header">
                    <h2>System Core</h2>
                </div>

                <div class="control-matrix">
                    <div class="stat-card" style="padding: 16px; margin-bottom: 12px; border-style: dashed;">
                        <div class="stat-label">Master Status</div>
                        <div
                            style="display: flex; align-items: center; gap: 8px; font-weight: 700; color: var(--success);">
                            <span
                                style="width: 8px; height: 8px; background: var(--success); border-radius: 50%;"></span>
                            OS ONLINE
                        </div>
                    </div>

                    <div class="node-item" style="padding: 16px; border-left: 2px solid var(--accent);">
                        <div style="font-size: 13px; font-weight: 600;">Neural Network</div>
                        <p style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">Dynamic learning active
                            across nodes.</p>
                    </div>

                    <div class="node-item" style="padding: 16px; border-left: 2px solid var(--primary);">
                        <div style="font-size: 13px; font-weight: 600;">Security Mesh</div>
                        <p style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">Real-time anti-injection
                            monitoring.</p>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <!-- NODE MANAGEMENT MODAL -->
    <div id="nodeModal" class="master-loader"
        style="display: none; background: rgba(8, 10, 18, 0.95); backdrop-filter: blur(20px);">
        <div class="panel" style="width: 500px; border-color: var(--primary);">
            <div class="panel-header">
                <h2 id="modalNodeName">Manage Node</h2>
                <button class="btn btn-outline" onclick="closeNodeModal()">‚úï</button>
            </div>

            <div class="control-matrix">
                <div class="control-item">
                    <div class="control-label">
                        <div class="control-title">Hardware Group Limit</div>
                        <input type="number" id="modalGroupLimit" value="5" class="dark-input"
                            style="width: 80px; text-align: center;">
                    </div>
                </div>

                <div class="control-item">
                    <div class="control-label">
                        <div class="control-title">AI Brain Activation</div>
                        <label class="switch-container">
                            <input type="checkbox" id="feat_ai_brain">
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <p class="control-subtitle">Enable specialized financial AI logic for this client.</p>
                </div>

                <div class="control-item">
                    <div class="control-label">
                        <div class="control-title">Guardian Protocol</div>
                        <label class="switch-container">
                            <input type="checkbox" id="feat_guardian">
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <p class="control-subtitle">Security policing and automated user banning.</p>
                </div>

                <div class="control-item">
                    <div class="control-label">
                        <div class="control-title">Advanced Report Precision</div>
                        <label class="switch-container">
                            <input type="checkbox" id="feat_reports">
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                    <p class="control-subtitle">Unlock 2-decimal high-precision financial reports.</p>
                </div>

                <div class="control-item" style="border-top: 1px solid var(--border); padding-top: 20px;">
                    <div class="control-title" style="margin-bottom: 12px; color: var(--success);">üõ∞Ô∏è Active Groups
                        (Tracing)</div>
                    <div id="modalGroupList" style="display: flex; flex-wrap: wrap; gap: 8px;">
                        <!-- Populate with bubbles -->
                    </div>
                </div>
            </div>

            <div style="margin-top: 32px; display: flex; gap: 12px;">
                <button class="btn btn-outline" style="flex: 1;" id="btnGoToNode">üåê Open Control Panel</button>
                <button class="btn btn-primary" style="flex: 1.5;" onclick="saveNodeEntitlements()">üíæ Save
                    Entitlements</button>
            </div>
        </div>
    </div>

    <script src="js/dashboard.js?v=2.3"></script>
</body>

</html>