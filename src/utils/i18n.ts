/**
 * LILY I18N (INTERNATIONALIZATION) ENGINE
 * High-performance, low-latency multilingual dictionary.
 */

export const I18N = {
    /**
     * Get a specific translation string
     */
    t(lang: string, key: string, params: Record<string, string> = {}): string {
        const dictionary: Record<string, Record<string, string>> = {
            CN: {
                'sys.ready': 'ðŸš€ **ç³»ç»Ÿå·²å°±ç»ª (System Ready)**\nðŸ“… ä¸šåŠ¡æ—¥æœŸ: {date}\n\n{wish}\n\nðŸ’¡ è¯·å¼€å§‹è®°è´¦ (Start recording now)',
                'sys.stop': 'ðŸ **æœ¬æ—¥è®°å½•å·²æ­£å¼ç»“æŸ (Day Finalized)**\n\nè¯·æŸ¥æ”¶ä»¥ä¸‹æœ€ç»ˆå¯¹è´¦å• PDFã€‚\n\n{bill}',
                'bill.summary': 'ðŸ“… **è´¦å•æ‘˜è¦ (Summary)**\næ€»å…¥æ¬¾: {totalIn}\næ€»ä¸‹å‘: -{totalOut}\nåº”ä¸‹å‘: {balance}',
                'bill.count_mode': '**è®¡æ•°æ¨¡å¼ (Count Mode)**\n\n',
                'bill.total': 'æ€»é¢',
                'bill.in': 'å…¥æ¬¾ (IN)',
                'bill.out': 'ä¸‹å‘ (OUT)',
                'bill.fee': 'è´¹çŽ‡',
                'bill.fx': 'æ±‡çŽ‡',
                'bill.due': 'åº”ä¸‹å‘ (IN)',
                'bill.payout': 'æ€»ä¸‹å‘ (OUT)',
                'bill.balance': 'ä½™é¢ (TOTAL)',
                'admin.alert': 'ðŸ”” **ç®¡ç†å‘˜æé†’ (Admin Notification)**',
                'admin.reason': 'åŽŸå› ',
                'admin.new_member': 'æ–°æˆå‘˜åŠ å…¥ï¼Œè¯·çŸ¥æ™“ (New Member! Please Alert)',
                'admin.malware': 'æŽ¢æµ‹åˆ°æ½œåœ¨æ¶æ„è½¯ä»¶æ”»å‡»',
                'console.title': "SIR's æŽ§åˆ¶å°",
                'console.guardian': "Guardian æ¨¡å¼",
                'console.ai': "AI å¤§è„‘",
                'console.welcome': "FIGHTER æ¬¢è¿Žè¯­",
                'console.lang': "è¯­è¨€",
                'console.disable': "ðŸ”´ ç¦ç”¨",
                'console.enable': "ðŸŸ¢ å¯ç”¨",
                'console.cycle': "ðŸŒ åˆ‡æ¢è¯­è¨€ (CN/EN/MY)",
                'console.back': "â¬…ï¸ è¿”å›žåˆ—è¡¨",
                'err.unauthorized': 'âŒ **æƒé™ä¸è¶³ (Unauthorized)**',
                'err.invalid_amount': 'âŒ **æ— æ•ˆé‡‘é¢ (Invalid Amount)**',
                'report.title': 'Lily Smartbot - è´¢åŠ¡æŠ¥è¡¨',
                'report.generated': 'ç”Ÿæˆæ—¶é—´',
                'report.group': 'ç¾¤ç»„',
                'report.date': 'ä¸šåŠ¡æ—¥æœŸ',
                'report.details': 'äº¤æ˜“è¯¦æƒ… (Transaction Details)',
                'report.summary': 'è´¢åŠ¡æ‘˜è¦ (Financial Summary)',
                'report.footer': 'Generated by Lily Smartbot',
                'col.time': 'æ—¶é—´',
                'col.type': 'ç±»åž‹',
                'col.raw': 'åŽŸå§‹é‡‘é¢',
                'col.fee': 'è´¹çŽ‡',
                'col.fee_amt': 'æ‰‹ç»­è´¹',
                'col.net': 'å‡€é¢',
                'col.operator': 'æ“ä½œäºº',
                'col.currency': 'å¸ç§',
                'tx.deposit': 'å…¥æ¬¾',
                'tx.payout': 'ä¸‹å‘',
                'tx.return': 'å›žæ¬¾',
                'fin.total_in': 'æ€»å…¥æ¬¾ (Total Deposits)',
                'fin.avg_rate': 'å¹³å‡è´¹çŽ‡ (Base Fee Rate)',
                'fin.net_in': 'åº”ä¸‹å‘ (Net Deposits)',
                'fin.total_out': 'æ€»ä¸‹å‘ (Total Payouts)',
                'fin.total_ret': 'å›žæ¬¾ (Total Returns)',
                'fin.balance': 'ä½™ (Final Balance)',
                'fin.equiv': 'ä½™é¢æ¢ç®—'
            },
            EN: {
                'sys.ready': 'ðŸš€ **System Ready**\nðŸ“… Business Date: {date}\n\n{wish}\n\nðŸ’¡ Start recording now',
                'sys.stop': 'ðŸ **Day Finalized**\n\nThe final PDF statement is ready below.\n\n{bill}',
                'bill.summary': 'ðŸ“… **Statement Summary**\nTotal IN: {totalIn}\nTotal OUT: -{totalOut}\nBalance: {balance}',
                'bill.count_mode': '**Count Mode**\n\n',
                'bill.total': 'Total',
                'bill.in': 'IN',
                'bill.out': 'OUT',
                'bill.fee': 'Fee',
                'bill.fx': 'Rate',
                'bill.due': 'Due (IN)',
                'bill.payout': 'Total OUT',
                'bill.balance': 'Balance (TOTAL)',
                'admin.alert': 'ðŸ”” **Admin Notification**',
                'admin.reason': 'Reason',
                'admin.new_member': 'New FIGHTER joined! Please alert.',
                'admin.malware': 'Potential Malware Attack Detected',
                'console.title': "SIR's Console",
                'console.guardian': "Guardian Mode",
                'console.ai': "AI Brain",
                'console.welcome': "FIGHTER Greeting",
                'console.lang': "Language",
                'console.disable': "ðŸ”´ Disable",
                'console.enable': "ðŸŸ¢ Enable",
                'console.cycle': "ðŸŒ Cycle Language (CN/EN/MY)",
                'console.back': "â¬…ï¸ Back to List",
                'err.unauthorized': 'âŒ **Unauthorized Access**',
                'err.invalid_amount': 'âŒ **Invalid Amount**',
                'report.title': 'Lily Smartbot - Financial Report',
                'report.generated': 'Generated At',
                'report.group': 'Group',
                'report.date': 'Business Date',
                'report.details': 'Transaction Details',
                'report.summary': 'Financial Summary',
                'report.footer': 'Generated by Lily Smartbot',
                'col.time': 'Time',
                'col.type': 'Type',
                'col.raw': 'Raw Amount',
                'col.fee': 'Fee Rate',
                'col.fee_amt': 'Fee Amount',
                'col.net': 'Net Amount',
                'col.operator': 'Operator',
                'col.currency': 'Ccy',
                'tx.deposit': 'IN',
                'tx.payout': 'OUT',
                'tx.return': 'RETURN',
                'fin.total_in': 'Total Deposits',
                'fin.avg_rate': 'Base Fee Rate',
                'fin.net_in': 'Net Deposits',
                'fin.total_out': 'Total Payouts',
                'fin.total_ret': 'Total Returns',
                'fin.balance': 'Final Balance',
                'fin.equiv': 'Equivalent'
            },
            MY: {
                'sys.ready': 'ðŸš€ **Sistem Sedia**\nðŸ“… Tarikh Bisnes: {date}\n\n{wish}\n\nðŸ’¡ Sila mula merakam (Start recording now)',
                'sys.stop': 'ðŸ **Hari Tamat**\n\nSila terima laporan PDF terakhir di bawah.\n\n{bill}',
                'bill.summary': 'ðŸ“… **Ringkasan Bil**\nJumlah Masuk: {totalIn}\nJumlah Keluar: -{totalOut}\nBaki: {balance}',
                'bill.count_mode': '**Count Mode**\n\n',
                'bill.total': 'Jumlah',
                'bill.in': 'Masuk (IN)',
                'bill.out': 'Keluar (OUT)',
                'bill.fee': 'Fee/Rate',
                'bill.fx': 'Kadar/FX',
                'bill.due': 'Patut Bayar (IN)',
                'bill.payout': 'Jumlah Keluar (OUT)',
                'bill.balance': 'Baki (TOTAL)',
                'admin.alert': 'ðŸ”” **Notifikasi Admin**',
                'admin.reason': 'Sebab',
                'admin.new_member': 'FIGHTER baru masuk! Sila alert.',
                'admin.malware': 'Serangan Malware Dikesan',
                'console.title': "SIR Console",
                'console.guardian': "Guardian Mode",
                'console.ai': "AI Brain",
                'console.welcome': "Greeting FIGHTER",
                'console.lang': "Bahasa",
                'console.disable': "ðŸ”´ Tutup",
                'console.enable': "ðŸŸ¢ Buka",
                'console.cycle': "ðŸŒ Tukar Bahasa (CN/EN/MY)",
                'console.back': "â¬…ï¸ Balik List",
                'err.unauthorized': 'âŒ **Tiada Kebenaran (Unauthorized)**',
                'err.invalid_amount': 'âŒ **Jumlah Tidak Sah**',
                'report.title': 'Lily Smartbot - Laporan Kewangan',
                'report.generated': 'Dihasilkan Pada',
                'report.group': 'Kumpulan',
                'report.date': 'Tarikh Bisnes',
                'report.details': 'Butiran Transaksi',
                'report.summary': 'Ringkasan Kewangan',
                'report.footer': 'Generated by Lily Smartbot',
                'col.time': 'Masa',
                'col.type': 'Jenis',
                'col.raw': 'Jumlah Asal',
                'col.fee': 'Kadar Fee',
                'col.fee_amt': 'Jumlah Fee',
                'col.net': 'Jumlah Bersih',
                'col.operator': 'Operator',
                'col.currency': 'Ccy',
                'tx.deposit': 'MASUK',
                'tx.payout': 'KELUAR',
                'tx.return': 'BALIK',
                'fin.total_in': 'Jumlah Masuk (Deposits)',
                'fin.avg_rate': 'Kadar Fee (Base)',
                'fin.net_in': 'Bersih Masuk (Net)',
                'fin.total_out': 'Jumlah Keluar (Payouts)',
                'fin.total_ret': 'Jumlah Balik (Returns)',
                'fin.balance': 'Baki Akhir (Balance)',
                'fin.equiv': 'Pertukaran Baki'
            }
        };

        let str = dictionary[lang as keyof typeof dictionary]?.[key] || dictionary.CN[key] || key;

        // Replace params
        Object.entries(params).forEach(([k, v]) => {
            str = str.replace(new RegExp(`\\{${k}\\}`, 'g'), v);
        });

        return str;
    }
};
